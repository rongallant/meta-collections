function get_metadata(e,t){url=t!=undefined?t:jQuery("#"+e).val();var n=url.match(/https:\/\/(:?www.)?(\w*)/)[2],r;if(n=="vimeo"){t=url.split("/");vimeo_json="http://vimeo.com/api/v2/video/"+t[3]+".json";jQuery.getJSON(vimeo_json+"?callback=?",{format:"json"},function(t){jQuery("#table_"+e).css({display:"block"});t=t[0];jQuery.each(t,function(e,t){if(jQuery("#vimeo_"+e).length>0){jQuery("#vimeo_"+e).val(t)}if(e=="thumbnail_medium"){jQuery("#img_thumbnail_medium").attr("src",t)}if(e=="user_portrait_medium"){jQuery("#img_user_portrait_medium").attr("src",t)}})});format_vimeo_url()}else{throw new Error("this is not a valid Vimeo URL")}}function format_vimeo_url(){var e=jQuery("#vimeo_intro_portrait").is(":checked")?1:0;var t=jQuery("#vimeo_intro_title").is(":checked")?1:0;var n=jQuery("#vimeo_intro_title").is(":checked")?1:0;var r=jQuery("#vimeo_autoplay").is(":checked")?1:0;var i=jQuery("#vimeo_loop").is(":checked")?1:0;var s=jQuery("#vimeo_id").val();var o=jQuery("#vimeo_color").val().length==6?"&color="+jQuery("#vimeo_color").val():"";url="http://player.vimeo.com/video/"+s+"/?title="+t+"&byline="+n+"&portrait="+e+"&autoplay="+r+"&loop="+i+o;jQuery("#vimeo_iframe").attr("src",url).css({display:"block"})}