var mapInstances={};var googleMaps;(function($){googleMaps={init:function(e){$.extend(this,e||{});this.geocoder=new google.maps.Geocoder},showmap:function(e){var t=this;t.init(e);mapInstances[this.name]=new google.maps.Map(document.getElementById(this.name),this.mapOptions);if(typeof this.placeMarks=="object"){this.getplacemarks()}},getplacemarks:function(){for(var e in this.placeMarks){this.createMarker(e)}},createMarker:function(m){marker=this.placeMarks[m];if(isNaN(marker.latitude)||isNaN(marker.longitude)){if(window.console)console.log("googleMaps::createMarker(): "+title+" latitude and longitude weren't valid.");return false}marker=new google.maps.Marker({position:new google.maps.LatLng(marker.latitude,marker.longitude),map:mapInstances[this.name],title:marker.title,draggable:true,objectname:this.name});google.maps.event.addListener(marker,"dragstart",function(){});google.maps.event.addListener(marker,"drag",function(){});google.maps.event.addListener(marker,"dragend",function(){self=eval(marker.objectname);self.reversegeocode($("#table_"+self.elementID+" #address"),marker.getPosition().lat(),marker.getPosition().lng());$("#table_"+self.elementID+" #latitude").val(marker.getPosition().lat());$("#table_"+self.elementID+" #longitude").val(marker.getPosition().lng())})},geocode:function(e,t,n){CurrentAddress=$(e).val();if($(e).data("LastAddressValidated")!=CurrentAddress){var r=new google.maps.Geocoder;r.geocode({address:$(e).val()},function(r,i){if(i=="OK"){var s=r[0].formatted_address;var o=r[0].geometry.location.lat();var u=r[0].geometry.location.lng();$(e).val(s);$(t).val(o);$(n).val(u);$(e).data("LastAddressValidated",s)}else{alert("Geocoder failed due to: "+i)}})}},reversegeocode:function(e,t,n){var t=parseFloat(t);var n=parseFloat(n);var r=new google.maps.LatLng(t,n);var i=new google.maps.Geocoder;i.geocode({latLng:r},function(t,n){if(n==google.maps.GeocoderStatus.OK){var r=t[0].formatted_address;$(e).val(r)}else{alert("Geocoder failed due to: "+n)}})}}})(jQuery)